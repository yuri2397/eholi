import { __decorate, __param } from "tslib";
import { Inject, Injectable } from '@angular/core';
import { swalProviderToken } from './di';
let SweetAlert2LoaderService = class SweetAlert2LoaderService {
    // Using any because Angular metadata generator does not understand a pure TS type here
    constructor(swalProvider) {
        this.swalProvider = swalProvider;
    }
    get swal() {
        if (!this.swalPromiseCache) {
            this.preloadSweetAlertLibrary();
        }
        return this.swalPromiseCache;
    }
    preloadSweetAlertLibrary() {
        if (this.swalPromiseCache)
            return;
        const libPromise = isLoader(this.swalProvider)
            ? this.swalProvider()
            : Promise.resolve(this.swalProvider);
        this.swalPromiseCache = libPromise.then(value => isDefaultExport(value) ? value : value.default);
        function isLoader(value) {
            return typeof value === 'function' && value.version === undefined;
        }
        function isDefaultExport(value) {
            return typeof value === 'function';
        }
    }
};
SweetAlert2LoaderService.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: [swalProviderToken,] }] }
];
SweetAlert2LoaderService = __decorate([
    Injectable(),
    __param(0, Inject(swalProviderToken))
], SweetAlert2LoaderService);
export { SweetAlert2LoaderService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3dlZXRhbGVydDItbG9hZGVyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3dlZXRhbGVydDIvbmd4LXN3ZWV0YWxlcnQyLyIsInNvdXJjZXMiOlsibGliL3N3ZWV0YWxlcnQyLWxvYWRlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVuRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFTekMsSUFBYSx3QkFBd0IsR0FBckMsTUFBYSx3QkFBd0I7SUFLakMsdUZBQXVGO0lBQ3ZGLFlBQThDLFlBQWlCO1FBQzNELElBQUksQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO0lBQ3JDLENBQUM7SUFFRCxJQUFXLElBQUk7UUFDWCxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFO1lBQ3hCLElBQUksQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO1NBQ25DO1FBRUQsT0FBTyxJQUFJLENBQUMsZ0JBQWlCLENBQUM7SUFDbEMsQ0FBQztJQUVNLHdCQUF3QjtRQUMzQixJQUFJLElBQUksQ0FBQyxnQkFBZ0I7WUFBRSxPQUFPO1FBRWxDLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQzFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3JCLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUV6QyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFakcsU0FBUyxRQUFRLENBQUMsS0FBbUI7WUFDakMsT0FBTyxPQUFPLEtBQUssS0FBSyxVQUFVLElBQUssS0FBYSxDQUFDLE9BQU8sS0FBSyxTQUFTLENBQUM7UUFDL0UsQ0FBQztRQUVELFNBQVMsZUFBZSxDQUFDLEtBQWlCO1lBQ3RDLE9BQU8sT0FBTyxLQUFLLEtBQUssVUFBVSxDQUFDO1FBQ3ZDLENBQUM7SUFDTCxDQUFDO0NBQ0osQ0FBQTs7NENBN0J1QixNQUFNLFNBQUMsaUJBQWlCOztBQU5uQyx3QkFBd0I7SUFEcEMsVUFBVSxFQUFFO0lBT1csV0FBQSxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtHQU5wQyx3QkFBd0IsQ0FtQ3BDO1NBbkNZLHdCQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IFN3YWxEZWZhdWx0LCAqIGFzIFN3YWwgZnJvbSAnc3dlZXRhbGVydDInO1xuaW1wb3J0IHsgc3dhbFByb3ZpZGVyVG9rZW4gfSBmcm9tICcuL2RpJztcblxuZXhwb3J0IHR5cGUgU3dhbE1vZHVsZSA9IHR5cGVvZiBTd2FsRGVmYXVsdCB8IHR5cGVvZiBTd2FsO1xuXG5leHBvcnQgdHlwZSBTd2FsUHJvdmlkZXIgPSBTd2FsTW9kdWxlTG9hZGVyIHwgU3dhbE1vZHVsZTtcblxuZXhwb3J0IHR5cGUgU3dhbE1vZHVsZUxvYWRlciA9ICgpID0+IFByb21pc2U8U3dhbE1vZHVsZT47XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBTd2VldEFsZXJ0MkxvYWRlclNlcnZpY2Uge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgc3dhbFByb3ZpZGVyOiBTd2FsUHJvdmlkZXI7XG5cbiAgICBwcml2YXRlIHN3YWxQcm9taXNlQ2FjaGU/OiBQcm9taXNlPHR5cGVvZiBTd2FsRGVmYXVsdD47XG5cbiAgICAvLyBVc2luZyBhbnkgYmVjYXVzZSBBbmd1bGFyIG1ldGFkYXRhIGdlbmVyYXRvciBkb2VzIG5vdCB1bmRlcnN0YW5kIGEgcHVyZSBUUyB0eXBlIGhlcmVcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoQEluamVjdChzd2FsUHJvdmlkZXJUb2tlbikgc3dhbFByb3ZpZGVyOiBhbnkpIHtcbiAgICAgICAgdGhpcy5zd2FsUHJvdmlkZXIgPSBzd2FsUHJvdmlkZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBzd2FsKCk6IFByb21pc2U8dHlwZW9mIFN3YWxEZWZhdWx0PiB7XG4gICAgICAgIGlmICghdGhpcy5zd2FsUHJvbWlzZUNhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLnByZWxvYWRTd2VldEFsZXJ0TGlicmFyeSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3dhbFByb21pc2VDYWNoZSE7XG4gICAgfVxuXG4gICAgcHVibGljIHByZWxvYWRTd2VldEFsZXJ0TGlicmFyeSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuc3dhbFByb21pc2VDYWNoZSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGxpYlByb21pc2UgPSBpc0xvYWRlcih0aGlzLnN3YWxQcm92aWRlcilcbiAgICAgICAgICAgID8gdGhpcy5zd2FsUHJvdmlkZXIoKVxuICAgICAgICAgICAgOiBQcm9taXNlLnJlc29sdmUodGhpcy5zd2FsUHJvdmlkZXIpO1xuXG4gICAgICAgIHRoaXMuc3dhbFByb21pc2VDYWNoZSA9IGxpYlByb21pc2UudGhlbih2YWx1ZSA9PiBpc0RlZmF1bHRFeHBvcnQodmFsdWUpID8gdmFsdWUgOiB2YWx1ZS5kZWZhdWx0KTtcblxuICAgICAgICBmdW5jdGlvbiBpc0xvYWRlcih2YWx1ZTogU3dhbFByb3ZpZGVyKTogdmFsdWUgaXMgU3dhbE1vZHVsZUxvYWRlciB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nICYmICh2YWx1ZSBhcyBhbnkpLnZlcnNpb24gPT09IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzRGVmYXVsdEV4cG9ydCh2YWx1ZTogU3dhbE1vZHVsZSk6IHZhbHVlIGlzIHR5cGVvZiBTd2FsRGVmYXVsdCB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19